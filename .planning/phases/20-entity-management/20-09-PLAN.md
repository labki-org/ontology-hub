---
phase: 20-entity-management
plan: 09
type: execute
wave: 4
depends_on: ["20-07", "20-08"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can create category via sidebar + New button"
    - "User can create all 6 entity types"
    - "User can delete entity and see Deleted badge"
    - "User can undo deletion"
    - "User can add relationships via combobox in detail views"
    - "Cascading create flow works for non-existent entities"
  artifacts: []
  key_links: []
---

<objective>
Human verification of complete entity management flow: create, delete, add relationships, and cascading create.

Purpose: Verify all MGMT requirements are satisfied with real user testing.
Output: Verified phase completion
</objective>

<execution_context>
@/home/daharoni/.claude/get-shit-done/workflows/execute-plan.md
@/home/daharoni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/20-entity-management/20-CONTEXT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete entity management system:
- "+ New" buttons in sidebar for all 6 entity types
- Create modals with validated forms
- Delete with dependency checking and inline undo
- Relationship editing via EntityCombobox
- Cascading create for non-existent entities
  </what-built>
  <how-to-verify>
**Setup:**
1. Start dev server: `cd frontend && npm run dev`
2. Start backend: `cd backend && ./run_dev.sh`
3. Navigate to app with draft token (create draft if needed)

**Test 1: Create Category (MGMT-01)**
1. In sidebar, find "Categories" section
2. Click "+ New" button next to Categories header
3. Modal opens with title "Create Category"
4. Enter invalid ID (e.g., "My Category") - see validation error on blur
5. Enter valid ID (e.g., "test-category")
6. Fill Label and Description
7. Click Create - modal closes
8. Verify new category appears in sidebar
9. Click on new category - detail panel/modal shows it

**Test 2: Create Property (MGMT-02)**
1. Click "+ New" next to Properties
2. Fill ID, Label, Description
3. Select Datatype (e.g., "Text")
4. Select Cardinality (e.g., "Single value")
5. Create button should be enabled now
6. Click Create - property appears in sidebar

**Test 3: Create Other Entity Types (MGMT-03, 04, 05, 06)**
- Repeat for Subobject (id, label, description)
- Repeat for Template (id, label, description, wikitext)
- Repeat for Module (id, version, label, description)
- Repeat for Bundle (id, version, label, description)

**Test 4: Delete Entity (MGMT-07)**
1. Find entity with NO dependents (e.g., newly created category)
2. Hover over entity in sidebar - see trash icon
3. Click trash - entity shows "Deleted" badge
4. Verify Undo button appears
5. Click Undo - entity restored

**Test 5: Delete Blocked by Dependents**
1. Find entity that others depend on
2. Try to delete - see error with dependent list
3. Verify deletion is blocked

**Test 6: Add Dependencies (MGMT-08)**
1. Open category detail (click on category in sidebar)
2. Toggle Edit Mode ON
3. In Parent Categories section, see combobox
4. Type to search, select existing category
5. Verify category added as chip
6. Click X on chip to remove
7. Verify auto-save (no explicit save button needed)

**Test 7: Cascading Create**
1. Open category detail in edit mode
2. In Parent Categories combobox, type non-existent ID
3. Click "Create [id]" option
4. Nested modal opens with ID prefilled
5. Fill required fields, click Create
6. Nested modal closes
7. Verify new category appears in parent form's chips
8. Cancel out - verify new category exists in sidebar
  </how-to-verify>
  <resume-signal>Type "approved" if all tests pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
All MGMT requirements verified through manual testing:
- MGMT-01: Create category ✓
- MGMT-02: Create property ✓
- MGMT-03: Create subobject ✓
- MGMT-04: Create template ✓
- MGMT-05: Create module ✓
- MGMT-06: Create bundle ✓
- MGMT-07: Delete entity ✓
- MGMT-08: Add dependencies ✓
</verification>

<success_criteria>
- All 7 test scenarios pass
- No console errors during tests
- UI is responsive and provides clear feedback
- Validation errors are helpful and specific
</success_criteria>

<output>
After completion, create `.planning/phases/20-entity-management/20-09-SUMMARY.md`
</output>

---
phase: 29-frontend-graph-visualization
plan: 03
type: execute
wave: 2
depends_on: ["29-02"]
files_modified:
  - frontend/src/stores/graphStore.ts
  - frontend/src/components/graph/GraphControls.tsx
autonomous: true

must_haves:
  truths:
    - "Module-Dashboard edges visible by default"
    - "Category-Resource edges visible by default"
    - "User can toggle Module-Dashboard edge visibility"
    - "User can toggle Category-Resource edge visibility"
  artifacts:
    - path: "frontend/src/stores/graphStore.ts"
      provides: "New edge types in default filter"
      contains: "module_dashboard"
    - path: "frontend/src/components/graph/GraphControls.tsx"
      provides: "Checkbox controls for new edge types"
      contains: "module_dashboard"
  key_links:
    - from: "GraphControls.tsx"
      to: "graphStore.edgeTypeFilter"
      via: "handleEdgeTypeToggle"
      pattern: "handleEdgeTypeToggle\\('module_dashboard'"
    - from: "graphStore.ts"
      to: "edgeTypeFilter initial state"
      via: "Set initialization"
      pattern: "new Set.*module_dashboard"
---

<objective>
Add edge type filtering for Dashboard and Resource relationships.

Purpose: Allow users to show/hide module-dashboard and category-resource edges in the graph controls.
Output: GraphControls shows checkboxes for new edge types, graphStore includes them in default filter.
</objective>

<execution_context>
@/home/daharoni/.claude/get-shit-done/workflows/execute-plan.md
@/home/daharoni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/29-frontend-graph-visualization/29-CONTEXT.md
@frontend/src/stores/graphStore.ts
@frontend/src/components/graph/GraphControls.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add new edge types to graphStore default filter</name>
  <files>frontend/src/stores/graphStore.ts</files>
  <action>
Update the initial edgeTypeFilter Set to include new edge types:

1. Update initialState.edgeTypeFilter:
```typescript
edgeTypeFilter: new Set<string>([
  'parent',
  'property',
  'subobject',
  'subobject_property',
  'module_dashboard',    // NEW
  'category_resource',   // NEW
]),
```

2. Update resetGraph action to include new edge types:
```typescript
state.edgeTypeFilter = new Set<string>([
  'parent',
  'property',
  'subobject',
  'subobject_property',
  'module_dashboard',    // NEW
  'category_resource',   // NEW
])
```

This ensures new edge types are visible by default and reset properly.
  </action>
  <verify>
cd /home/daharoni/dev/ontology-hub/frontend && npx tsc --noEmit 2>&1 | head -20
  </verify>
  <done>
graphStore.edgeTypeFilter includes module_dashboard and category_resource in both initialState and resetGraph.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add edge type checkboxes to GraphControls</name>
  <files>frontend/src/components/graph/GraphControls.tsx</files>
  <action>
Add checkbox controls for new edge types in the "Edges:" row:

After the existing "Subobject Props" checkbox, add:

```tsx
<label className="flex items-center gap-1.5 cursor-pointer">
  <Checkbox
    id="edge-module-dashboard"
    checked={edgeTypeFilter.has('module_dashboard')}
    onCheckedChange={(checked) =>
      handleEdgeTypeToggle('module_dashboard', checked as boolean)
    }
    className="h-3.5 w-3.5"
  />
  <span className="text-xs">Dashboards</span>
</label>
<label className="flex items-center gap-1.5 cursor-pointer">
  <Checkbox
    id="edge-category-resource"
    checked={edgeTypeFilter.has('category_resource')}
    onCheckedChange={(checked) =>
      handleEdgeTypeToggle('category_resource', checked as boolean)
    }
    className="h-3.5 w-3.5"
  />
  <span className="text-xs">Resources</span>
</label>
```

Labels are short ("Dashboards", "Resources") to fit the compact layout. The full edge type names (module_dashboard, category_resource) are used internally.
  </action>
  <verify>
cd /home/daharoni/dev/ontology-hub/frontend && npx tsc --noEmit 2>&1 | head -20
  </verify>
  <done>
GraphControls.tsx has checkboxes for "Dashboards" (module_dashboard) and "Resources" (category_resource) edge type filters.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation: cd /home/daharoni/dev/ontology-hub/frontend && npx tsc --noEmit
2. Build check: cd /home/daharoni/dev/ontology-hub/frontend && npm run build 2>&1 | tail -10
</verification>

<success_criteria>
- graphStore.initialState.edgeTypeFilter includes 'module_dashboard' and 'category_resource'
- graphStore.resetGraph includes new edge types
- GraphControls shows "Dashboards" checkbox that toggles module_dashboard filter
- GraphControls shows "Resources" checkbox that toggles category_resource filter
- Frontend compiles and builds without errors
</success_criteria>

<output>
After completion, create `.planning/phases/29-frontend-graph-visualization/29-03-SUMMARY.md`
</output>

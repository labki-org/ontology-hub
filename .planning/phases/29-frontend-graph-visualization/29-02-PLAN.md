---
phase: 29-frontend-graph-visualization
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/api/types.ts
  - frontend/src/components/graph/GraphNode.tsx
  - frontend/src/components/graph/GraphCanvas.tsx
autonomous: true

must_haves:
  truths:
    - "Dashboard nodes render with distinct shape in graph"
    - "Resource nodes render with distinct shape in graph"
    - "Dashboard nodes have warm color (red/coral)"
    - "Resource nodes have cool color (cyan)"
    - "Selecting dashboard or resource in graph works"
  artifacts:
    - path: "frontend/src/components/graph/GraphNode.tsx"
      provides: "Dashboard and Resource node shapes and colors"
      contains: "dashboard:"
    - path: "frontend/src/components/graph/GraphCanvas.tsx"
      provides: "Edge colors for new edge types"
      contains: "module_dashboard"
    - path: "frontend/src/api/types.ts"
      provides: "Dashboard and Resource detail types"
      contains: "DashboardDetailV2"
  key_links:
    - from: "GraphCanvas.tsx"
      to: "GRAPH_SUPPORTED_TYPES"
      via: "Set membership check"
      pattern: "GRAPH_SUPPORTED_TYPES.*dashboard"
    - from: "GraphNode.tsx"
      to: "NODE_SIZES"
      via: "entity_type lookup"
      pattern: "NODE_SIZES\\[entityType\\]"
---

<objective>
Add Dashboard and Resource node rendering to frontend graph visualization.

Purpose: Display the new entity types visually in the graph with distinct shapes and colors.
Output: GraphNode.tsx renders dashboard and resource nodes, GraphCanvas.tsx supports their edge types.
</objective>

<execution_context>
@/home/daharoni/.claude/get-shit-done/workflows/execute-plan.md
@/home/daharoni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/29-frontend-graph-visualization/29-RESEARCH.md
@.planning/phases/29-frontend-graph-visualization/29-CONTEXT.md
@frontend/src/components/graph/GraphNode.tsx
@frontend/src/components/graph/GraphCanvas.tsx
@frontend/src/api/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Dashboard and Resource types to frontend</name>
  <files>frontend/src/api/types.ts</files>
  <action>
Add TypeScript interfaces for Dashboard and Resource detail responses:

1. Add DashboardPage interface (if not exists):
```typescript
export interface DashboardPage {
  name: string
  wikitext: string
}
```

2. Add DashboardDetailV2 interface:
```typescript
export interface DashboardDetailV2 {
  entity_key: string
  label: string
  description?: string | null
  pages: DashboardPage[]
  change_status?: 'added' | 'modified' | 'deleted' | 'unchanged'
  deleted?: boolean
}
```

3. Add ResourceDetailV2 interface:
```typescript
export interface ResourceDetailV2 {
  entity_key: string
  label: string
  description?: string | null
  category_key: string
  dynamic_fields: Record<string, unknown>
  change_status?: 'added' | 'modified' | 'deleted' | 'unchanged'
  deleted?: boolean
}
```

4. Update EntityDetailV2 union type to include new types:
```typescript
export type EntityDetailV2 =
  | CategoryDetailV2
  | PropertyDetailV2
  | SubobjectDetailV2
  | ModuleDetailV2
  | BundleDetailV2
  | TemplateDetailV2
  | DashboardDetailV2
  | ResourceDetailV2
```
  </action>
  <verify>
cd /home/daharoni/dev/ontology-hub/frontend && npx tsc --noEmit 2>&1 | head -20
  </verify>
  <done>
TypeScript types for DashboardDetailV2 and ResourceDetailV2 exist and compile without errors.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Dashboard and Resource node shapes and colors</name>
  <files>frontend/src/components/graph/GraphNode.tsx</files>
  <action>
Update GraphNode.tsx to render dashboard and resource nodes:

1. Add to NODE_SIZES:
```typescript
const NODE_SIZES: Record<string, number> = {
  category: 80,
  subobject: 60,
  property: 50,
  template: 50,
  dashboard: 70,   // Similar to category - structural entity
  resource: 45,    // Compact - data instances
}
```

2. Add to ENTITY_COLORS (fill colors):
```typescript
const ENTITY_COLORS: Record<string, string> = {
  category: '#94a3b8',   // slate-400
  property: '#86efac',   // green-300
  subobject: '#c4b5fd',  // violet-300
  template: '#fcd34d',   // amber-300
  dashboard: '#fca5a5',  // red-300 - warm, distinct
  resource: '#a5f3fc',   // cyan-300 - cool, compact
}
```

3. Add to ENTITY_BORDER_COLORS:
```typescript
const ENTITY_BORDER_COLORS: Record<string, string> = {
  category: '#64748b',   // slate-500
  property: '#22c55e',   // green-500
  subobject: '#8b5cf6',  // violet-500
  template: '#f59e0b',   // amber-500
  dashboard: '#ef4444',  // red-500
  resource: '#06b6d4',   // cyan-500
}
```

4. Update getNodePath function to handle new types:
```typescript
function getNodePath(entityType: string): string {
  const size = NODE_SIZES[entityType] ?? 50
  switch (entityType) {
    case 'category':
      return roundedRectPath(size, 10)
    case 'property':
      return diamondPath(size)
    case 'subobject':
      return hexagonPath(size)
    case 'template':
      return circlePath(size)
    case 'dashboard':
      return roundedRectPath(size, 12)  // Rounded rect like category, larger radius
    case 'resource':
      return roundedRectPath(size, 4)   // Small rect, subtle rounding
    default:
      return roundedRectPath(size, 4)
  }
}
```

Shapes follow CONTEXT.md direction: dashboard uses basic shape consistent with existing design, resource is small rectangle.
  </action>
  <verify>
cd /home/daharoni/dev/ontology-hub/frontend && npx tsc --noEmit 2>&1 | head -20
  </verify>
  <done>
GraphNode.tsx renders dashboard nodes (70px, red-300, rounded rect) and resource nodes (45px, cyan-300, small rect).
  </done>
</task>

<task type="auto">
  <name>Task 3: Update GraphCanvas for new entity types and edges</name>
  <files>frontend/src/components/graph/GraphCanvas.tsx</files>
  <action>
Update GraphCanvas.tsx to support dashboard and resource entities:

1. Add to GRAPH_SUPPORTED_TYPES:
```typescript
const GRAPH_SUPPORTED_TYPES = new Set(['category', 'property', 'subobject', 'template', 'module', 'dashboard', 'resource'])
```

2. Update getEdgeColor function to handle new edge types:
```typescript
function getEdgeColor(edgeType: string): string {
  switch (edgeType) {
    case 'parent':
      return '#475569'       // slate-600
    case 'property':
      return '#2563eb'       // blue-600
    case 'subobject':
      return '#7c3aed'       // violet-600
    case 'subobject_property':
      return '#0d9488'       // teal-600
    case 'module_dashboard':
      return '#dc2626'       // red-600 - matches dashboard color
    case 'category_resource':
      return '#0891b2'       // cyan-600 - matches resource color
    default:
      return '#475569'
  }
}
```

3. Update getEdgeStrokeDasharray function:
```typescript
function getEdgeStrokeDasharray(edgeType: string): string | undefined {
  switch (edgeType) {
    case 'parent':
      return undefined      // solid
    case 'property':
      return '5,5'          // dashed
    case 'subobject':
      return '2,2'          // dotted
    case 'subobject_property':
      return '5,5'          // dashed
    case 'module_dashboard':
      return '8,4'          // long dash - distinct
    case 'category_resource':
      return '3,3'          // short dash - distinct
    default:
      return undefined
  }
}
```
  </action>
  <verify>
cd /home/daharoni/dev/ontology-hub/frontend && npx tsc --noEmit 2>&1 | head -20
  </verify>
  <done>
GraphCanvas.tsx supports dashboard and resource in GRAPH_SUPPORTED_TYPES. Edge colors and dash patterns defined for module_dashboard and category_resource edge types.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation: cd /home/daharoni/dev/ontology-hub/frontend && npx tsc --noEmit
2. Build check: cd /home/daharoni/dev/ontology-hub/frontend && npm run build 2>&1 | tail -10
</verification>

<success_criteria>
- DashboardDetailV2 and ResourceDetailV2 interfaces exist in types.ts
- EntityDetailV2 union includes new types
- NODE_SIZES, ENTITY_COLORS, ENTITY_BORDER_COLORS include dashboard and resource
- getNodePath returns appropriate shapes for dashboard and resource
- GRAPH_SUPPORTED_TYPES includes dashboard and resource
- getEdgeColor and getEdgeStrokeDasharray handle module_dashboard and category_resource
- Frontend compiles without errors
</success_criteria>

<output>
After completion, create `.planning/phases/29-frontend-graph-visualization/29-02-SUMMARY.md`
</output>

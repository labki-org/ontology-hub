---
phase: 30-frontend-detail-components
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/api/entities.ts
autonomous: true

must_haves:
  truths:
    - "useDashboard hook fetches single dashboard by key"
    - "useResource hook fetches single resource by key"
    - "useDashboards hook fetches paginated dashboard list"
    - "useResources hook fetches paginated resource list"
  artifacts:
    - path: "frontend/src/api/entities.ts"
      provides: "Dashboard and Resource API hooks"
      exports: ["useDashboard", "useResource", "useDashboards", "useResources"]
  key_links:
    - from: "frontend/src/api/entities.ts"
      to: "/dashboards and /resources API endpoints"
      via: "fetchEntitiesV2 and fetchEntityV2 functions"
      pattern: "fetchEntityV2\\('dashboards'|'resources'"
---

<objective>
Add API hooks for Dashboard and Resource entities to enable data fetching in detail components.

Purpose: Detail components need to fetch entity data. Following existing patterns (useTemplate, useCategory), we add corresponding hooks for dashboards and resources.

Output: Four new exported hooks in entities.ts following established patterns.
</objective>

<execution_context>
@/home/daharoni/.claude/get-shit-done/workflows/execute-plan.md
@/home/daharoni/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/30-frontend-detail-components/30-CONTEXT.md
@.planning/phases/30-frontend-detail-components/30-RESEARCH.md

# Key source files
@frontend/src/api/entities.ts
@frontend/src/api/types.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add Dashboard and Resource API hooks</name>
  <files>frontend/src/api/entities.ts</files>
  <action>
Add four new hooks following the exact patterns of existing hooks (useTemplate, useCategory, etc.):

1. `useDashboards(cursor?, limit?, draftId?)` - List hook
   - queryKey: ['v2', 'dashboards', { cursor, limit, draftId }]
   - queryFn: fetchEntitiesV2('dashboards', cursor, limit, draftId)

2. `useDashboard(entityKey, draftId?)` - Detail hook
   - queryKey: ['v2', 'dashboard', entityKey, { draftId }]
   - queryFn: fetchEntityV2('dashboards', entityKey, draftId)
   - enabled: !!entityKey

3. `useResources(cursor?, limit?, draftId?)` - List hook
   - queryKey: ['v2', 'resources', { cursor, limit, draftId }]
   - queryFn: fetchEntitiesV2('resources', cursor, limit, draftId)

4. `useResource(entityKey, draftId?)` - Detail hook
   - queryKey: ['v2', 'resource', entityKey, { draftId }]
   - queryFn: fetchEntityV2('resources', entityKey, draftId)
   - enabled: !!entityKey

Place hooks at the end of the file, after usePropertyUsedBy, grouped together with a comment.

No imports needed - fetchEntitiesV2 and fetchEntityV2 already exist in the file.
  </action>
  <verify>
TypeScript compiles without errors:
```bash
cd frontend && npx tsc --noEmit
```
  </verify>
  <done>
All four hooks exported: useDashboard, useResource, useDashboards, useResources. TypeScript compiles successfully.
  </done>
</task>

</tasks>

<verification>
1. `grep -E "export function use(Dashboard|Resource)" frontend/src/api/entities.ts` shows 4 hooks
2. TypeScript compilation passes
3. Hooks follow exact pattern of existing hooks (queryKey structure, enabled option)
</verification>

<success_criteria>
- useDashboard, useResource, useDashboards, useResources exported from entities.ts
- TypeScript compiles with no errors
- Hook patterns match existing conventions (queryKey, queryFn, enabled)
</success_criteria>

<output>
After completion, create `.planning/phases/30-frontend-detail-components/30-01-SUMMARY.md`
</output>
